<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Home Page Settings</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
    
    :root {
      --bg-primary: #0a0a0f;
      --bg-secondary: #1a1a2e;
      --bg-card: rgba(255, 255, 255, 0.05);
      --bg-glass: rgba(255, 255, 255, 0.1);
      --accent-primary: #6366f1;
      --accent-secondary: #8b5cf6;
      --text-primary: #ffffff;
      --text-secondary: #a1a1aa;
      --text-muted: #ffffff;
      --border: rgba(255, 255, 255, 0.1);
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      padding: 20px;
    }

    .settings-container {
      max-width: 1000px; margin: 0 auto; background: var(--bg-card);
      backdrop-filter: blur(20px); border-radius: 24px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3); border: 1px solid var(--border);
    }
    .settings-header {
      background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
      color: white; padding: 3rem 2rem; text-align: center;
    }
    .settings-header h2 { font-weight: 800; font-size: 2rem; }
    .settings-body { padding: 2.5rem; }
    .form-section {
      margin-bottom: 3rem; padding: 2rem; background: var(--bg-glass);
      border-radius: 24px; border: 1px solid var(--border);
    }
    .section-title {
      font-size: 1.4rem; font-weight: 700; margin-bottom: 2rem;
      padding-bottom: 1rem; border-bottom: 2px solid var(--border);
    }
    .section-title i { color: var(--accent-primary); }
    .form-label { font-weight: 600; margin-bottom: 0.75rem; }
    .form-control {
      border: 2px solid var(--border); border-radius: 16px; padding: 1rem 1.25rem;
      background: var(--bg-secondary); color: var(--text-primary);
    }
    .form-control:focus {
      border-color: var(--accent-primary); box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
      background: var(--bg-secondary); color: var(--text-primary);
    }
    .image-upload-container {
      position: relative; width: 150px; height: 150px; margin: 0 auto 1rem;
    }
    .image-preview {
      width: 100%; height: 100%; object-fit: cover;
      border-radius: 50%; border: 4px solid var(--border);
    }
    .image-upload-label {
      position: absolute; bottom: 5px; right: 5px; background: var(--accent-primary);
      color: white; width: 40px; height: 40px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      cursor: pointer; border: 3px solid var(--bg-card);
    }
    .btn { padding: 1rem 2rem; font-weight: 600; border-radius: 16px; }
    .btn-primary { background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)); color: white; }
    .btn-secondary { background: var(--bg-glass); color: var(--text-secondary); border: 1px solid var(--border); }
    .btn-actions { display: flex; gap: 1.5rem; justify-content: flex-end; align-items: center; margin-top: 3rem; }
  </style>
</head>
<body>
  <div class="settings-container">
    <div class="settings-header">
      <h2><i class="fas fa-home"></i> Edit Home Page</h2>
      <p>Update all the content for your main portfolio page</p>
    </div>
    
    <div class="settings-body">
      <form method="POST" enctype="multipart/form-data">
        
        <div class="form-section">
          <h3 class="section-title"><i class="fas fa-user-circle"></i> Main Profile</h3>
          <div class="row g-4 align-items-center mb-4">
            <div class="col-md-4 d-flex justify-content-center">
              <div class="image-upload-container">
                {% if home_data and home_data.firstimage %}
                  <img src="https://res.cloudinary.com/dsf4cui9f/image/upload/w_300,h_300,c_fill,f_auto,q_auto/{{ home_data.firstimage }}" alt="First Image" class="image-preview" id="firstImagePreview">
                {% else %}
                  <img src="https://via.placeholder.com/150" alt="First Image" class="image-preview" id="firstImagePreview">
                {% endif %}
                <label for="firstImageUpload" class="image-upload-label" title="Change first image"><i class="fas fa-camera"></i></label>
                <input type="file" id="firstImageUpload" name="firstImage" class="form-control d-none" accept="image/*">
              </div>
            </div>
            <div class="col-md-8">
              <div class="form-group mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" id="name" name="name" class="form-control" value="{{ home_data.name if home_data else '' }}">
              </div>
              <div class="form-group mb-3">
                <label for="title" class="form-label">Title</label>
                <input type="text" id="title" name="title" class="form-control" value="{{ home_data.title if home_data else '' }}">
              </div>
               <div class="form-group mb-0">
                <label for="role" class="form-label">Role</label>
                <input type="text" id="role" name="role" class="form-control" value="{{ home_data.role if home_data else '' }}">
              </div>
            </div>
          </div>
        </div>
        
        <div class="form-section">
            <h3 class="section-title"><i class="fas fa-info-circle"></i> About Section</h3>
            <div class="form-group">
                <label for="about" class="form-label">About Content</label>
                <textarea id="about" name="about" class="form-control" rows="5">{{ home_data.about if home_data else '' }}</textarea>
            </div>
        </div>

        <div class="form-section">
            <h3 class="section-title"><i class="fas fa-file-alt"></i> Main Page Content</h3>
            <div class="form-group">
                <label for="main" class="form-label">Main Body Text</label>
                <textarea id="main" name="main" class="form-control" rows="8">{{ home_data.main if home_data else '' }}</textarea>
            </div>
        </div>

        <div class="form-section">
            <h3 class="section-title"><i class="fas fa-images"></i> Secondary Image</h3>
            <div class="row g-4 align-items-center">
                <div class="col-md-4 d-flex justify-content-center">
                    <div class="image-upload-container">
                        {% if home_data and home_data.secondimage %}
                            <img src="https://res.cloudinary.com/dsf4cui9f/image/upload/w_300,h_300,c_fill,f_auto,q_auto/{{ home_data.secondimage }}" alt="Secondary Image" class="image-preview" id="secondImagePreview">
                        {% else %}
                            <img src="https://via.placeholder.com/150" alt="Secondary Image" class="image-preview" id="secondImagePreview">
                        {% endif %}
                        <label for="secondImageUpload" class="image-upload-label" title="Change second image"><i class="fas fa-camera"></i></label>
                        <input type="file" id="secondImageUpload" name="secondImage" class="form-control d-none" accept="image/*">
                    </div>
                </div>
                <div class="col-md-8"><p>This is the second image field from your database.</p></div>
            </div>
        </div>

        <div class="form-section">
            <h3 class="section-title"><i class="fas fa-address-book"></i> Contact & Socials</h3>
            <div class="row g-4">
                <div class="col-md-6 form-group"><label for="phone" class="form-label">Phone</label><input type="tel" id="phone" name="phone" class="form-control" value="{{ home_data.phone if home_data else '' }}"></div>
                <div class="col-md-6 form-group"><label for="github" class="form-label">GitHub</label><input type="text" id="github" name="github" class="form-control" value="{{ home_data.github if home_data else '' }}"></div>
                <div class="col-md-6 form-group"><label for="insta" class="form-label">Instagram</label><input type="text" id="insta" name="insta" class="form-control" value="{{ home_data.insta if home_data else '' }}"></div>
                <div class="col-md-6 form-group"><label for="linkedin" class="form-label">LinkedIn</label><input type="text" id="linkedin" name="linkedin" class="form-control" value="{{ home_data.linkedin if home_data else '' }}"></div>
            </div>
        </div>

        <div class="btn-actions">
          <a href="{{ url_for('dashboard') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Back</a>
          <button type="submit" class="btn btn-primary" id="saveBtn"><i class="fas fa-save"></i> Save All Changes</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    function setupImagePreview(inputId, previewId) {
      const imageInput = document.getElementById(inputId);
      const imagePreview = document.getElementById(previewId);
      if (imageInput && imagePreview) {
        imageInput.addEventListener('change', function(e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = (event) => imagePreview.src = event.target.result;
            reader.readAsDataURL(file);
          }
        });
      }
    }
    setupImagePreview('firstImageUpload', 'firstImagePreview');
    setupImagePreview('secondImageUpload', 'secondImagePreview');
  </script>
</body>
</html>